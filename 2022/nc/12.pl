my($h,@g,$x,$y,$X,$Y,@s)=-1;
chomp,$h++,/^(.*)E/&&(($y,$x)=($h,length$1),$s[$y][$x]=0),/^(.*)S/&&(($Y,$X)=($h,length$1)),tr/ES/{`/,push@g,[map{-95+ord}split//]while<>;
my($w,$n,$t,@q,@s,$l,$v)=(@{$g[0]}-1,0,0,[$x,$y,0]);
while(@q){
(($x,$y,$l)=@{shift@q}),$s[$y][$x]++&&next,1==($v=$g[$y][$x]-1)&&($t||=$l),$x==$X&&$y==$Y&&($n=$l),$l++,push@q,
($x>0&&$g[$y][$x-1]>=$v)?[$x-1,$y,$l]:(),
($x<$w&&$g[$y][$x+1]>=$v)?[$x+1,$y,$l]:(),
($y>0&&$g[$y-1][$x]>=$v)?[$x,$y-1,$l]:(),
($y<$h&&$g[$y+1][$x]>=$v)?[$x,$y+1,$l]:()
}
say"$n\n$t"
