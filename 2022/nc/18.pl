my($t,$n,$mx,$my,$mz,@g)=(0,0,0,0,0);
$g[$_->[0]+1][$_->[1]+1][$_->[2]+1]=2,
$_->[0]>$mx&&($mx=$_->[0]),
$_->[1]>$my&&($my=$_->[1]),
$_->[2]>$mz&&($mz=$_->[2])for my@r=map{chomp;[map{int$_}split/,/]}<>;
$mx+=2,$my+=2,$mz+=2,$n=6*@r;
for(@r) {
$n--if$g[$_->[0]][$_->[1]+1][$_->[2]+1];
$n--if$g[$_->[0]+1][$_->[1]][$_->[2]+1];
$n--if$g[$_->[0]+1][$_->[1]+1][$_->[2]];
$n--if$g[$_->[0]+2][$_->[1]+1][$_->[2]+1];
$n--if$g[$_->[0]+1][$_->[1]+2][$_->[2]+1];
$n--if$g[$_->[0]+1][$_->[1]+1][$_->[2]+2];
}

my@q=([0,0,0]);
while($_=shift@q){my($x,$y,$z)=@{$_};
$t++if(my$v=$g[$x][$y][$z]||0)==2;next if$v;
$g[$x][$y][$z]=1;
push@q,$z?[$x,$y,$z-1]:(),$z<$mz?[$x,$y,$z+1]:(),
$y?[$x,$y-1,$z]:(),$y<$my?[$x,$y+1,$z]:(),
$x?[$x-1,$y,$z]:(),$x<$mx?[$x+1,$y,$z]:()}

say"$n\n$t"

