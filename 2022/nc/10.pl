my($p,$x,$z,$t,$n)=(1,1,0,0,'');
sub o{$n.=(!$z&&"\n").(abs($z-$x)<2?'#':'.'),$p++,$z++,$z%=40,$z==20&&($t+=$p*$x)}
o,/addx (\S+)/&&(o,$x+=$1)while<>;
say$t,$n
