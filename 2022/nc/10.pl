my($p,$x,$z,$t,$n)=(1,1,0,0,'');
sub o{
$t+=$p*$x if$z==19;
$n.=($z?'':"\n").(abs($z-$x)<2?'#':'.');
$p++;
$z++;
$z%=40
}
o,/addx (\S+)/&&(o,$x+=$1)while<>;
say "$t$n"

